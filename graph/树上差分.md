## 树上点差分

**修改两点之间路径上点的所有权值**

#### 方法：

修改点权：

**num[x]+=v,num[y]+=v,num[lca(x,y)]-=v,num[fa[lca(x,y)]]-=v**

最后只用dfs一遍，每个根节点加上所有子树的权值和



## 树上边差分

**修改两点之间路径上边的所有权值**

#### 方法：

**还是修改点权：**

**num[x]+=v,num[y]+=v,num[lca(x,y)]-=2*v**

最后dfs一遍，每条边加上子节点的点权

**边的权值等于边指向儿子节点的权值**





https://www.luogu.com.cn/problem/P2680

这个题精妙在使用二分 范围是0到查询的最长路径，来到m时只用考虑大于m的路径，考虑去删除所有大于m的路径中公共的权值最大的边，此时可以用边差分给路径上的边++，边权值为路径个数的取max，然后考虑删掉这条边能不能满足
