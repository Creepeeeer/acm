势能线段树不需要懒更新机制，因为更新的内容无法用lazytag来存，但是此时若某个最大值小于某个阈值，此时整个区间就不用修改了。



[Problem - 438D - Codeforces](https://codeforces.com/problemset/problem/438/D)

如果这个区间的最大值<mod,那么就不修改，如果一个数可以被修改，那么这个数至少/2,整体代价是$log a[i]$的

虽然还有单点增加但是幅度很小



[P3740 [HAOI2014\] 贴海报 - 洛谷](https://www.luogu.com.cn/problem/P3740)

这个题需要离散化，但是单纯的离散化可能会使中间值丢失，如 100 3 1 100 1 49 51 100会输入2因为会丢失50的值

方法：离散化排序完如果nums[i]+1!=num[i+1]，那么在插入一个num[i]+1作为中间值

